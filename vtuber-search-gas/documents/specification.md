# VTuber Radar 仕様書

> **対象読者**: 本ドキュメントは、技術的な知識がない方にも理解していただけるよう作成しています。

---

## 📋 目次

1. [システム概要](#1-システム概要)
2. [このシステムでできること](#2-このシステムでできること)
3. [システムの仕組み](#3-システムの仕組み)
4. [検索条件と対象](#4-検索条件と対象)
5. [データの保存先（スプレッドシート）](#5-データの保存先スプレッドシート)
6. [Webアプリの使い方](#6-webアプリの使い方)
7. [自動実行の設定](#7-自動実行の設定)
8. [制限事項と注意点](#8-制限事項と注意点)
9. [用語集](#9-用語集)

---

## 1. システム概要

### 1.1 VTuber Radar とは

**VTuber Radar** は、YouTubeから**個人勢VTuber**のチャンネルを自動的に見つけ出し、その情報を整理・保存するツールです。

```
┌─────────────────────────────────────────────────────────────┐
│                     VTuber Radar の流れ                      │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│   ① YouTube       ② 自動検索        ③ スプレッドシート      │
│   ┌─────────┐     ┌─────────┐       ┌─────────────────┐     │
│   │         │ ──▶ │ VTuber  │ ──▶   │ チャンネル情報  │     │
│   │ YouTube │     │  Radar  │       │ を整理して保存  │     │
│   │         │     │         │       └─────────────────┘     │
│   └─────────┘     └─────────┘               │               │
│                                              ▼               │
│                                       ④ Webアプリ          │
│                                       ┌─────────────────┐   │
│                                       │ きれいな画面で  │   │
│                                       │ データを閲覧    │   │
│                                       └─────────────────┘   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 1.2 なぜこのシステムが必要か

- **手作業の削減**: YouTubeで一つ一つチャンネルを探す手間を省きます
- **情報の一元管理**: 見つけたチャンネルの情報をスプレッドシートにまとめます
- **定期的な更新**: 毎時間自動で新しいチャンネルを探し、情報を更新します
- **見やすい表示**: Webアプリで登録者数順などでソートして見られます

---

## 2. このシステムでできること

### 2.1 機能一覧

| 機能 | 説明 |
|------|------|
| 🔍 **自動チャンネル検索** | 「VTuber 個人勢」などのキーワードでYouTubeを検索し、条件に合うチャンネルを自動で収集します |
| 📊 **チャンネル情報の取得** | 登録者数、投稿頻度、平均再生回数など、詳しい情報を自動で取得します |
| 📝 **スプレッドシート保存** | 収集したデータをGoogleスプレッドシートに自動保存します |
| 🔴 **ライブ配信監視** | 指定したチャンネルのライブ配信を監視し、同時接続数を記録します |
| 🌐 **Webアプリ表示** | 美しいダークテーマの画面でデータを閲覧できます |
| ⏰ **自動実行** | 設定すると毎時間自動でデータを更新します |
| 🚫 **チャンネル除外機能** | 不要なチャンネルをリストから非表示にできます（データは保持されます） |

### 2.2 収集できる情報

各VTuberチャンネルについて、以下の情報を収集します：

| 項目 | 内容 | 例 |
|------|------|-----|
| チャンネル名 | YouTubeのチャンネル名 | 〇〇ちゃんねる |
| チャンネルアイコン | プロフィール画像 | （画像） |
| 登録者数 | チャンネル登録者の数 | 15,000人 |
| 投稿頻度 | 1ヶ月あたりの動画投稿数 | 10本/月 |
| 平均再生回数 | 直近10動画の平均再生数 | 5,000回 |
| 平均いいね数 | 直近10動画の平均いいね数 | 300 |
| 平均コメント数 | 直近10動画の平均コメント数 | 50 |
| 最終投稿日 | 最後に動画を投稿した日 | 2024-01-15 |
| チャンネル説明文 | 概要欄のテキスト | 〇〇が好きなVTuberです |
| X（Twitter）リンク | SNSアカウントへのリンク | @example |
| 最大同時接続数 | ライブ配信の最高視聴者数 | 500人 |

---

## 3. システムの仕組み

### 3.1 全体構成

```
┌──────────────────────────────────────────────────────────────────────┐
│                          システム構成図                               │
├──────────────────────────────────────────────────────────────────────┤
│                                                                      │
│  ┌────────────────┐      ┌────────────────────────────────────────┐ │
│  │                │      │         Google Apps Script              │ │
│  │   YouTube      │◀────▶│  ┌──────────┐  ┌──────────────────┐    │ │
│  │   Data API     │      │  │ 検索機能  │  │ライブ配信監視機能│    │ │
│  │                │      │  └──────────┘  └──────────────────┘    │ │
│  └────────────────┘      │        │                 │             │ │
│                          │        ▼                 ▼             │ │
│                          │  ┌──────────────────────────────────┐  │ │
│                          │  │     スプレッドシート管理機能      │  │ │
│                          │  └──────────────────────────────────┘  │ │
│                          │                   │                    │ │
│                          │                   ▼                    │ │
│                          │  ┌──────────────────────────────────┐  │ │
│                          │  │         Webアプリ機能            │  │ │
│                          │  └──────────────────────────────────┘  │ │
│                          └────────────────────────────────────────┘ │
│                                         │                           │
│                                         ▼                           │
│  ┌───────────────────────────────────────────────────────────────┐  │
│  │                   Google スプレッドシート                      │  │
│  │  ┌────────────┐  ┌────────────┐  ┌────────────────┐           │  │
│  │  │VTuberリスト│  │同時接続数  │  │除外キーワード  │           │  │
│  │  │   シート   │  │  シート    │  │   シート       │           │  │
│  │  └────────────┘  └────────────┘  └────────────────┘           │  │
│  └───────────────────────────────────────────────────────────────┘  │
│                                                                      │
└──────────────────────────────────────────────────────────────────────┘
```

### 3.2 処理の流れ

#### チャンネル検索処理

```
① キーワードで検索
   └▶ 「VTuber 個人勢」「新人VTuber」でYouTubeを検索

② チャンネルを発見
   └▶ 検索結果からチャンネルを抽出

③ フィルタリング
   └▶ 条件に合わないチャンネルを除外
      • 登録者数が5,000人未満
      • 大手事務所所属のチャンネル
      • 7日以上投稿がないチャンネル

④ 詳細情報を取得
   └▶ 動画の再生数やいいね数などを取得

⑤ スプレッドシートに保存
   └▶ 新規チャンネル → 追加
      既存チャンネル → 情報を更新
```

#### ライブ配信監視処理

```
① 監視対象を確認
   └▶ スプレッドシートで「監視ON」のチャンネルを取得

② ライブ配信をチェック
   └▶ 各チャンネルのライブ配信を確認

③ 同時接続数を記録
   └▶ ライブ配信中であれば視聴者数を記録

④ 最大値を更新
   └▶ 過去最高の同時接続数を更新
```

---

## 4. 検索条件と対象

### 4.1 検索対象

| 項目 | 設定値 | 説明 |
|------|--------|------|
| 検索キーワード | 「VTuber 個人勢」「新人VTuber」 | YouTubeで検索するワード |
| 検索地域 | 日本 | 日本のコンテンツを優先 |
| 言語 | 日本語 | 日本語コンテンツを優先 |

### 4.2 収集条件

**以下の条件をすべて満たすチャンネルが収集されます：**

| 条件 | 値 | 理由 |
|------|-----|------|
| 最小登録者数 | 5,000人以上 | ある程度の規模があるチャンネルを対象 |
| アクティブ判定 | 7日以内に投稿 | 活動しているチャンネルのみ対象 |
| 最大取得数 | 500チャンネル | 処理時間とAPI制限の考慮 |

### 4.3 除外条件

**以下に該当するチャンネルは除外されます：**

大手VTuber事務所に所属するチャンネルは、「個人勢」を探す目的のため除外しています。

| 除外キーワード | 対象 |
|---------------|------|
| ホロライブ / hololive | ホロライブプロダクション所属 |
| にじさんじ / nijisanji | にじさんじ所属 |
| ぶいすぽ / VSPO | ぶいすぽっ！所属 |
| .LIVE | どっとライブ所属 |
| 774inc | 774inc.所属 |
| Re:AcT | Re:AcT所属 |
| のりプロ | のりプロ所属 |
| あおぎり高校 | あおぎり高校所属 |
| RIONECTION | RIONECTION所属 |

> **💡 ヒント**: 除外キーワードはスプレッドシートの「除外キーワード」シートで自由に追加・編集できます。

---

## 5. データの保存先（スプレッドシート）

### 5.1 シート構成

スプレッドシートには3つのシートがあります：

| シート名 | 内容 |
|----------|------|
| **VTuberリスト** | 収集したVTuberチャンネルの一覧 |
| **同時接続数** | ライブ配信の視聴者数の記録 |
| **除外キーワード** | 検索から除外するキーワードの設定 |

### 5.2 VTuberリストシートの列構成

| 列 | 項目名 | 内容 |
|----|--------|------|
| A | ライブ配信監視 | ☑ チェックでライブ監視ON |
| B | 除外フラグ | ☑ チェックで行を非表示（Webアプリにも表示されません） |
| C | アイコン | チャンネルのプロフィール画像 |
| D | チャンネルID | YouTubeの内部ID |
| E | チャンネル名 | チャンネルの名前 |
| F | チャンネルURL | YouTubeへのリンク |
| G | 登録者数 | チャンネル登録者数 |
| H | 投稿頻度（本/月） | 月あたりの投稿数 |
| I | 平均再生回数 | 直近動画の平均再生数 |
| J | 平均いいね数 | 直近動画の平均いいね数 |
| K | 平均コメント数 | 直近動画の平均コメント数 |
| L | 最終投稿日 | 最新動画の投稿日時 |
| M | チャンネル説明文 | 概要欄の内容（500文字まで） |
| N | X（Twitter）リンク | SNSアカウントへのリンク |
| O | 取得日時 | データを収集した日時 |
| P | 最大同時接続数 | ライブ配信の最高視聴者数 |
| Q | 最大同時接続数日時 | 最高記録を出した日時 |

> **💡 ヒント**: B列の「除外フラグ」にチェックを入れると、その行がスプレッドシートで非表示になり、Webアプリにも表示されなくなります。データは削除されずに保持されるため、後でチェックを外すと再表示されます。

### 5.3 同時接続数シートの列構成

| 列 | 項目名 | 内容 |
|----|--------|------|
| A | チャンネルID | チャンネルの内部ID |
| B | チャンネル名 | チャンネルの名前 |
| C | 配信タイトル | ライブ配信のタイトル |
| D | 配信URL | 配信へのリンク |
| E | 同時接続数 | 記録時点の視聴者数 |
| F | 記録日時 | データを記録した日時 |
| G | 配信ステータス | 配信中/待機中など |

### 5.4 除外キーワードシートの列構成

| 列 | 項目名 | 内容 |
|----|--------|------|
| A | キーワード | 除外したい文字列 |
| B | 説明 | なぜ除外するかのメモ |

---

## 6. Webアプリの使い方

### 6.1 画面構成

```
┌─────────────────────────────────────────────────────────────────────┐
│ VTuber Radar                                            🌙 ダーク  │
├─────────────────────────────────────────────────────────────────────┤
│                                                                     │
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │                    📊 統計ダッシュボード                      │  │
│  │  ┌────────────┐ ┌────────────┐ ┌────────────┐ ┌───────────┐  │  │
│  │  │ 総チャンネル│ │ 総登録者数 │ │ 平均登録者 │ │ 監視中   │  │  │
│  │  │    150     │ │  1,500,000│ │   10,000   │ │    5     │  │  │
│  │  └────────────┘ └────────────┘ └────────────┘ └───────────┘  │  │
│  └──────────────────────────────────────────────────────────────┘  │
│                                                                     │
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │ [登録者数▼] [平均再生▼] [最大同接▼] [投稿頻度▼]  🔍検索...  │  │
│  └──────────────────────────────────────────────────────────────┘  │
│                                                                     │
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │ #1  [アイコン] チャンネル名A         登録者: 50,000人        │  │
│  │                                      平均再生: 10,000回      │  │
│  │                                      最大同接: 500人         │  │
│  ├──────────────────────────────────────────────────────────────┤  │
│  │ #2  [アイコン] チャンネル名B         登録者: 45,000人        │  │
│  │                                      平均再生: 8,000回       │  │
│  │                                      最大同接: 450人         │  │
│  └──────────────────────────────────────────────────────────────┘  │
│                                                                     │
│  ┌──────────────────────────────────────────────────────────────┐  │
│  │                    [<] 1 2 3 4 5 [>]                         │  │
│  └──────────────────────────────────────────────────────────────┘  │
│                                                                     │
└─────────────────────────────────────────────────────────────────────┘
```

### 6.2 機能説明

| 機能 | 操作方法 | 説明 |
|------|----------|------|
| **ソート** | タブをクリック | 登録者数順、平均再生順などで並び替え |
| **検索** | 検索ボックスに入力 | チャンネル名や説明文で絞り込み |
| **ページ切替** | ページ番号をクリック | 50件ずつ表示、ページを移動 |
| **チャンネル詳細** | カードをクリック | YouTubeチャンネルを新しいタブで開く |

### 6.3 統計ダッシュボード

画面上部に表示される統計情報：

| 項目 | 説明 |
|------|------|
| 総チャンネル数 | 収集されたチャンネルの総数（除外されたチャンネルを除く） |
| 総登録者数 | 全チャンネルの登録者数合計 |
| 平均登録者数 | 1チャンネルあたりの平均登録者数 |
| 監視中チャンネル | ライブ配信監視がONのチャンネル数 |

> **💡 ヒント**: スプレッドシートで「除外フラグ」にチェックを入れたチャンネルはWebアプリに表示されません。統計情報にも含まれません。

### 6.4 アクセス方法

WebアプリのURLは以下の形式です：

```
https://script.google.com/macros/s/[デプロイメントID]/exec
```

> **💡 ヒント**: URLはデプロイ時に発行されます。管理者にお問い合わせください。

---

## 7. 自動実行の設定

### 7.1 トリガー一覧

| トリガー名 | 実行頻度 | 処理内容 |
|------------|----------|----------|
| チャンネル検索 | 毎時間 | VTuberチャンネルを検索し、情報を更新 |
| ライブ配信監視 | 5分ごと | 監視対象のライブ配信をチェック |

### 7.2 実行タイミング

```
チャンネル検索（毎時間）:
  00:00, 01:00, 02:00, ... 23:00

ライブ配信監視（5分ごと）:
  00:00, 00:05, 00:10, ... 23:55
```

### 7.3 設定方法

トリガーの設定は、Google Apps Scriptエディタから行います：

1. **チャンネル検索の自動実行を設定**
   - `setupTrigger` 関数を実行

2. **ライブ配信監視の自動実行を設定**
   - `setupLiveStreamMonitorTrigger` 関数を実行

3. **トリガーを停止したい場合**
   - `deleteTrigger` または `deleteLiveStreamMonitorTrigger` 関数を実行

---

## 8. 制限事項と注意点

### 8.1 YouTube Data API の制限

| 制限項目 | 値 | 説明 |
|----------|-----|------|
| 日次クォータ | 10,000ユニット | 1日に使えるAPIの回数制限 |
| 検索1回 | 100ユニット | 検索するたびに消費 |
| 詳細取得1回 | 1ユニット | チャンネル情報取得で消費 |

> **⚠️ 注意**: クォータを使い切ると、翌日まで検索ができなくなります。

### 8.2 Google Apps Script の制限

| 制限項目 | 値 | 説明 |
|----------|-----|------|
| 実行時間 | 最大6分 | 1回の処理は6分以内に完了が必要 |
| トリガー実行 | 1時間あたり | 頻繁な実行はエラーの原因に |

### 8.3 データ更新のタイミング

| 項目 | 更新タイミング |
|------|---------------|
| 新規チャンネル | 検索実行時に追加 |
| 既存チャンネル | 前回更新から24時間以上経過後 |
| 同時接続数 | ライブ配信検出時に随時記録 |

### 8.4 注意点

1. **大手事務所のチャンネル**
   - 除外キーワードに登録されているため収集されません
   - 収集したい場合は、除外キーワードシートから該当キーワードを削除してください

2. **非アクティブなチャンネル**
   - 7日以上投稿がないチャンネルは収集対象外です
   - 活動を再開すれば、次回検索時に収集されます

3. **登録者数の少ないチャンネル**
   - 5,000人未満のチャンネルは収集対象外です
   - この値は設定ファイルで変更可能です

4. **除外フラグについて**
   - B列の「除外フラグ」にチェックを入れると、その行がスプレッドシートで非表示になります
   - Webアプリにも表示されなくなりますが、データ自体は削除されません
   - チェックを外すと再表示されます
   - 「VTuberではないチャンネル」や「興味のないチャンネル」を整理するのに便利です

---

## 9. 用語集

| 用語 | 読み方 | 説明 |
|------|--------|------|
| VTuber | ブイチューバー | バーチャルYouTuberの略。アバターを使って活動する配信者 |
| 個人勢 | こじんぜい | 事務所に所属せず、個人で活動するVTuber |
| GAS | ガス | Google Apps Scriptの略。Googleが提供するプログラミング環境 |
| API | エーピーアイ | Application Programming Interface。システム間でデータをやり取りする仕組み |
| トリガー | - | 自動実行の設定。時間を指定してプログラムを動かす機能 |
| クォータ | - | 使用制限。1日に使えるAPIの回数上限 |
| スプレッドシート | - | Googleが提供する表計算ソフト。Excelに似たもの |
| デプロイ | - | プログラムを公開・配置すること |
| 同時接続数 | どうじせつぞくすう | ライブ配信を同時に見ている視聴者の数 |
| プレイリスト | - | YouTubeの動画をまとめた一覧 |
| 除外フラグ | じょがいフラグ | チャンネルを一覧から非表示にするためのチェックボックス |

---

## 📞 お問い合わせ

不明点や追加の機能要望がございましたら、システム管理者までお問い合わせください。

---

**最終更新日**: 2025年12月

**バージョン**: 1.1
